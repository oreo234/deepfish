import{_ as e,m as t,a,f as l,b as s,r as o,w as r,E as i,o as n,F as c,g as m,h as u,k as d,j as g}from"./index-rHRo5HIh.js";import"./index-CfoHtWIz.js";import{f as h}from"./index-proxR6sI.js";const I={class:"dashboard-container"},p={class:"dashboard-header"},C={class:"card-header"},f={key:0,class:"image-container"},v={key:1,class:"chart-container",ref:"datasetDistributionChart"},w={class:"card-header"},b={key:0,class:"image-container two-images"},O={class:"img-item"},L={class:"img-item"},y={key:1,class:"image-container"},B={key:2,class:"image-container"},j={class:"card-header"},x={class:"grid-2x2"},M={class:"card-header"},R={class:"grid-2x2"},_={class:"card-header"},A={key:0,class:"image-container"},D={key:1,class:"image-container two-images"},k={class:"img-item"},W={class:"img-item"},U={class:"card-header"},S={key:1,class:"no-excel"};const H=e({name:"DashboardPage",components:{InfoFilled:t},data:()=>({selectedModel:"yolo_seg",models:[{id:"yolo_seg",name:"YOLOv8-验证集"},{id:"yolo_test",name:"YOLOv8-测试集"},{id:"resnet50",name:"RetinaNet"},{id:"efficientnet",name:"Faster R-CNN"}],charts:{},tableData:[],detailsDialogVisible:!1,selectedFishDetails:null,metricsOverall:null,datasetDistributionImg:new URL("/assets/labels-Bs-fvehv.jpg",import.meta.url).href,yoloSegConfusionImg:new URL("/assets/confusion_matrix-BKlD2-g0.png",import.meta.url).href,yoloValConfusionImg:new URL("/assets/confusion_matrix-a6ifRqms.png",import.meta.url).href,trainBatchImg:new URL("/assets/train_batch0-BKtNrlP3.jpg",import.meta.url).href,boxF1CurveImg:new URL("/assets/BoxF1_curve-DkWTv_hA.png",import.meta.url).href,boxPCurveImg:new URL("/assets/BoxP_curve-BGkxk3G_.png",import.meta.url).href,boxPRCurveImg:new URL("/assets/BoxPR_curve-8jkpt8ZL.png",import.meta.url).href,boxRCurveImg:new URL("/assets/BoxR_curve-bxPp7Uf_.png",import.meta.url).href,boxF1CurveImg2:new URL("/assets/BoxF1_curve-fTB-Rmwd.png",import.meta.url).href,boxPCurveImg2:new URL("/assets/BoxP_curve-CBuTXlia.png",import.meta.url).href,boxPRCurveImg2:new URL("/assets/BoxPR_curve-DwzvgB34.png",import.meta.url).href,boxRCurveImg2:new URL("/assets/BoxR_curve-BtOTD-D3.png",import.meta.url).href,retinanetLossImg:new URL("/assets/retinanet_training_loss_curve-Bh85L1ud.png",import.meta.url).href,fasterrcnnLossImg:new URL("/assets/fasterrcnn_training_loss_curve-C07Dlopa.png",import.meta.url).href,efficientnetResultImg:new URL("/assets/fasterrcnn%E7%BB%93%E6%9E%9C-DOhcF2WM.jpg",import.meta.url).href,segResultsImg:new URL("/assets/results-BL_Xq1-C.png",import.meta.url).href,valLeftImg:new URL("/assets/val_batch0_labels-3m5gqEyZ.jpg",import.meta.url).href,valRightImg:new URL("/assets/val_batch1_labels-BVvKq6CR.jpg",import.meta.url).href,mdHtml:"",valPredImg:new URL("/assets/val_batch0_pred-BC-Hm4kn.jpg",import.meta.url).href,valLabelImg:new URL("/assets/val_batch0_labels-oTrb7wiN.jpg",import.meta.url).href,excelRows:[],excelCols:[],modelCompareCols:[],modelCompareRows:[],mockData:{}}),mounted(){this.loadModelData(),this.tryLoadCsv(),this.tryLoadModelCompareMd()},methods:{goBack(){this.$router.push("/")},async loadModelData(){var e;try{const e=await h.getMetrics(this.selectedModel);this.metricsOverall=e}catch(t){}if(!this.datasetDistributionImg){const t=(null==(e=this.mockData)?void 0:e[this.selectedModel])||{};t.datasetDistribution&&this.$nextTick(()=>this.renderDatasetDistributionChart(t.datasetDistribution))}},async tryLoadCsv(){try{const e=new URL("../assets/yolo_fish_segmentation/results.csv",import.meta.url).href,t=await fetch(e);if(!t.ok)return;const a=(await t.text()).trim().split(/\r?\n/),l=a.shift().split(","),s=a.map(e=>{const t=e.split(","),a={};return l.forEach((e,l)=>a[e]=t[l]),a});this.excelCols=l,this.excelRows=s}catch(e){this.excelCols=[],this.excelRows=[]}},downloadExcel(){const e=new URL("../../整理好的对比数据.xlsx",import.meta.url).href,t=document.createElement("a");t.href=e,t.download="整理好的对比数据.xlsx",document.body.appendChild(t),t.click(),document.body.removeChild(t)},exportData(){let e=[],t=[];if(this.excelRows&&this.excelRows.length&&this.excelCols&&this.excelCols.length)e=this.excelCols,t=this.excelRows.map(t=>e.map(e=>t[e]??""));else{if(!this.tableData||!this.tableData.length)return void i.warning("暂无可供导出的数据");e=["class","samples","precision","recall","f1","accuracy"],t=this.tableData.map(t=>e.map(e=>t[e]??""))}const a=[e.join(","),...t.map(e=>e.join(","))].join("\n"),l=new Blob([a],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(l),o=document.createElement("a");o.href=s,o.download="导出数据.csv",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},tryLoadModelCompareMd(){try{const e=new URL("data:text/markdown;base64,IyDmqKHlnovmgKfog73lr7nmr5TkuI7mjIfmoIfor7TmmI4NCg0KIyMg5LiA44CB5qih5Z6L5oCn6IO95a+55q+UDQoNCnwg5qih5Z6L5ZCN56ewIHwgbUFQQDAuNSB8IG1BUEAwLjU6MC45NSB8IFByZWNpc2lvbiB8IFJlY2FsbCB8IEYxLVNjb3JlIHwgQm94IExvc3MgfCBDbHMgTG9zcyB8IOeUqOaXtu+8iG1pbjpzZWPvvIkgfA0KfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfCAtLS0gfA0KfCBZT0xPIHwgMC44NTM2IHwgMC42NzI2IHwgMC44MzMgfCAwLjgzNTEgfCAwLjgzNCB8IDAuMCB8IDAuMCB8IDAxOjE1OjAwIHwNCnwgRmFzdGVyIFItQ05OIHwgMC42MTYzIHwgMC43NDI1IHwgMC42NzUyIHwgMC44ODk1IHwgMC43Njc3IHwgMC4wIHwgMC4wIHwgMTM6Mjc6MDAgfA0KfCBSZXRpbmFOZXQgfCAwLjU3NjIgfCAwLjYyNTkgfCAwLjgzNzcgfCAwLjY1MzUgfCAwLjczNDIgfCAwLjAgfCAwLjAgfCAwOTo0ODowMCB8DQoNCiMjIOS6jOOAgeaMh+agh+ivtOaYjg0KDQp8IOaMh+aghyB8IOWFqOensCB8IOWQq+S5ieivtOaYjiB8IOe7k+iuuumhuSB8IOaAu+e7kyB8DQp8IC0tLSB8IC0tLSB8IC0tLSB8IC0tLSB8IC0tLSB8DQp8IOaMh+aghyB8IOWFqOensCB8IOWQq+S5ieivtOaYjiB8ICB8ICB8DQp8IG1BUEAwLjUgfCBNZWFuIEF2ZXJhZ2UgUHJlY2lzaW9uIGF0IElvVSA9IDAuNSB8IOWcqOS6pOW5tuavlCAoSW9VKSDiiaUgMC41IOaXtu+8jOaJgOacieexu+WIq+eahOW5s+Wdh+ajgOa1i+eyvuW6puWdh+WAvOOAguWPjeaYoOajgOa1i+ahhuS9jee9ruWHhuehruaAp+OAguaVsOWAvOi2iumrmOi2iuWlveOAgiB8IOe7k+iuuumhuSB8IOaAu+e7kyB8DQp8IG1BUEAwLjU6MC45NSB8IE1lYW4gQXZlcmFnZSBQcmVjaXNpb24gYXZlcmFnZWQgb3ZlciBJb1UgdGhyZXNob2xkcyAoMC414oCTMC45NSkgfCDlnKggSW9VIDAuNX4wLjk177yI5q2l6ZW/MC4wNe+8ieeahOWMuumXtOS4iuW5s+Wdh+eahCBtQVDvvIzooaHph4/mqKHlnovlr7nkuI3lkIznsr7luqbopoHmsYLkuIvnmoTnu7zlkIjmo4DmtYvog73lipvvvIzmm7TkuKXmoLzjgIHmm7TlhajpnaLjgIIgfCDnsr7luqbooajnjrDmnIDkvJggfCBZT0xP77yIbUFQQDAuNSA9IDAuODXvvInmlbTkvZPmo4DmtYvnsr7luqbmnIDpq5jjgIIgfA0KfCBQcmVjaXNpb27vvIjnsr7noa7njofvvIkgfCBUUCAvIChUUCArIEZQKSB8IOihqOekuumihOa1i+S4uuato+eahOagt+acrOS4reacieWkmuWwkeaYr+ecn+ato+eahOato+agt+acrOOAgumrmOeyvuW6puaEj+WRs+edgOivr+aKpeWwkeOAgiB8IOWPrOWbnueOh+acgOmrmCB8IEZhc3RlciBSLUNOTu+8iFJlY2FsbCA9IDAuODg5Ne+8ieajgOa1i+WIsOeahOebruagh+acgOWkmu+8jOS9humAn+W6puacgOaFouOAgiB8DQp8IFJlY2FsbO+8iOWPrOWbnueOh++8iSB8IFRQIC8gKFRQICsgRk4pIHwg6KGo56S65omA5pyJ5q2j5qC35pys5Lit5pyJ5aSa5bCR6KKr5q2j56Gu5qOA5rWL5Ye65p2l44CC6auY5Y+s5Zue5oSP5ZGz552A5ryP5qOA5bCR44CCIHwg6YCf5bqm5pyA5b+rIHwgWU9MT++8iDHliIYxNeenkuWujOaIkOa1i+ivle+8ie+8jOaViOeOh+aYvuiRl+mrmOS6juWFtuS7luS4pOenjeaooeWei+OAgiB8DQp8IEYxLVNjb3JlIHwgMsOXKFByZWNpc2lvbsOXUmVjYWxsKS8oUHJlY2lzaW9uK1JlY2FsbCkgfCDnu7zlkIjlubPooaEgUHJlY2lzaW9uIOS4jiBSZWNhbGwg55qE6LCD5ZKM5bmz5Z2H5pWw77yM55So5LqO5pW05L2T5oCn6IO96K+E5Lyw44CCIHwg5bmz6KGh5oCn6L6D5aW9IHwgWU9MTyDlnKjnsr7luqbjgIHlj6zlm57kuI7pgJ/luqbkuIrooajnjrDlnYfooaHjgIIgfA0KfCBCb3ggTG9zcyB8IEJvdW5kaW5nIEJveCBMb3NzIHwg6KGo56S65qih5Z6L5Zyo6aKE5rWL6L655qGG5L2N572u5pe255qE6K+v5beu77yM5YC86LaK5bCP6K+05piO5qGG5a6a5L2N5pu05YeG56Gu44CCIHwgIHwgIHwNCnwgQ2xzIExvc3MgfCBDbGFzc2lmaWNhdGlvbiBMb3NzIHwg6KGo56S65qih5Z6L5Zyo5YiG57G777yI6K+G5Yir57G75Yir77yJ5pe255qE5o2f5aSx77yM5YC86LaK5bCP6K+05piO5YiG57G76LaK5YeG56Gu44CCIHwgIHwgIHwNCnwg55So5pe2IHwgRXZhbHVhdGlvbiBUaW1lIHwg5qih5Z6L5Zyo5rWL6K+V6ZuG5LiK5a6M5oiQ5LiA5qyh5a6M5pW06K+E5Lyw5omA6ZyA55qE5pe26Ze077yM5qC85byP5Li65YiG6ZKfOuenkuOAgui2iuefreivtOaYjuaOqOeQhuaViOeOh+i2iumrmOOAgiB8ICB8ICB8DQo=",import.meta.url).href;fetch(e).then(e=>e.ok?e.text():Promise.reject("not ok")).then(e=>{const{cols:t,rows:a}=this.parseMarkdownTable(e);this.modelCompareCols=t,this.modelCompareRows=a}).catch(()=>{this.mdHtml="<p>未能加载模型效果对比文档。</p>",this.modelCompareCols=[],this.modelCompareRows=[]})}catch(e){this.mdHtml="<p>未能加载模型效果对比文档。</p>",this.modelCompareCols=[],this.modelCompareRows=[]}},simpleMarkdownToHtml(e){const t=e.split(/\r?\n/),a=[];let l=0;for(;l<t.length;){const e=t[l];if(e.startsWith("### "))a.push(`<h3>${e.slice(4)}</h3>`),l++;else if(e.startsWith("## "))a.push(`<h2>${e.slice(3)}</h2>`),l++;else if(e.startsWith("# "))a.push(`<h1>${e.slice(2)}</h1>`),l++;else{if(e.trim().startsWith("|")){const e=[];for(;l<t.length&&t[l].trim().startsWith("|");)e.push(t[l]),l++;const s=e=>e.trim().slice(1,e.trim().endsWith("|")?-1:void 0).split("|").map(e=>e.trim()),o=s(e[0]||""),r=e.slice(2).map(s);a.push("<table>"),a.push("<thead><tr>"+o.map(e=>`<th>${e}</th>`).join("")+"</tr></thead>"),a.push("<tbody>"+r.map(e=>"<tr>"+e.map(e=>`<td>${e}</td>`).join("")+"</tr>").join("")+"</tbody>"),a.push("</table>");continue}0!==e.trim().length?(a.push(`<p>${e}</p>`),l++):l++}}return a.join("\n")},parseMarkdownTable(e){const t=e.split(/\r?\n/),a=[];for(let r=0;r<t.length;r++)t[r].trim().startsWith("|")&&a.push(t[r]);if(!a.length)return{cols:[],rows:[]};const l=e=>e.trim().slice(1,e.trim().endsWith("|")?-1:void 0).split("|").map(e=>e.trim()),s=l(a[0]),o=a.slice(2).map(l).map(e=>Object.fromEntries(e.map((e,t)=>[s[t],e])));return{cols:s,rows:o}}}},[["render",function(e,t,i,h,H,N){const Y=o("el-page-header"),q=o("el-option"),K=o("el-select"),Z=o("InfoFilled"),F=o("el-icon"),G=o("el-tooltip"),E=o("el-image"),z=o("el-card"),P=o("el-col"),Q=o("el-table-column"),T=o("el-table"),V=o("el-row");return n(),a("div",I,[l(Y,{onBack:N.goBack,title:"返回首页",content:"数据看板"},null,8,["onBack"]),s("div",p,[t[1]||(t[1]=s("h1",null,"鱼类识别模型数据分析",-1)),l(K,{modelValue:H.selectedModel,"onUpdate:modelValue":t[0]||(t[0]=e=>H.selectedModel=e),placeholder:"选择模型",onChange:N.loadModelData},{default:r(()=>[(n(!0),a(c,null,m(H.models,e=>(n(),u(q,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),l(V,{gutter:20,class:"dashboard-content"},{default:r(()=>[l(P,{xs:24,sm:24,md:12,lg:12,xl:12},{default:r(()=>[l(z,{class:"chart-card tall",shadow:"hover"},{header:r(()=>[s("div",C,[t[2]||(t[2]=s("h3",null,"数据集分布",-1)),l(G,{content:"显示训练数据集中各类鱼的数量分布",placement:"top"},{default:r(()=>[l(F,null,{default:r(()=>[l(Z)]),_:1})]),_:1})])]),default:r(()=>[H.datasetDistributionImg?(n(),a("div",f,[l(E,{src:H.datasetDistributionImg,fit:"contain"},null,8,["src"])])):(n(),a("div",v,null,512))]),_:1})]),_:1}),l(P,{xs:24,sm:24,md:12,lg:12,xl:12},{default:r(()=>[l(z,{class:"chart-card",shadow:"hover"},{header:r(()=>[s("div",w,[t[3]||(t[3]=s("h3",null,"模型指标图",-1)),l(G,{content:"根据所选模型展示：YOLOv8显示混淆矩阵与train_batch0；其余显示训练损失曲线",placement:"top"},{default:r(()=>[l(F,null,{default:r(()=>[l(Z)]),_:1})]),_:1})])]),default:r(()=>["yolo_seg"===H.selectedModel||"yolo_test"===H.selectedModel?(n(),a("div",b,[s("div",O,[s("h4",null,g("yolo_seg"===H.selectedModel?"验证集 混淆矩阵":"测试集 混淆矩阵"),1),l(E,{src:"yolo_seg"===H.selectedModel?H.yoloSegConfusionImg:H.yoloValConfusionImg,fit:"contain"},null,8,["src"])]),s("div",L,[t[4]||(t[4]=s("h4",null,"训练批次样例（train_batch0）",-1)),l(E,{src:H.trainBatchImg,fit:"contain"},null,8,["src"])])])):"resnet50"===H.selectedModel?(n(),a("div",y,[l(E,{src:H.retinanetLossImg,fit:"contain"},null,8,["src"])])):"efficientnet"===H.selectedModel?(n(),a("div",B,[l(E,{src:H.fasterrcnnLossImg,fit:"contain"},null,8,["src"])])):d("",!0)]),_:1})]),_:1}),"yolo_seg"===H.selectedModel?(n(),u(P,{key:0,xs:24,sm:24,md:24,lg:24,xl:24},{default:r(()=>[l(z,{class:"chart-card",shadow:"hover"},{header:r(()=>[s("div",j,[s("h3",null,g("yolo_seg"===H.selectedModel?"验证集":"测试集")+"曲线概览",1)])]),default:r(()=>[s("div",x,[l(E,{src:"yolo_seg"===H.selectedModel?H.boxF1CurveImg:H.boxF1CurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:"yolo_seg"===H.selectedModel?H.boxPCurveImg:H.boxPCurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:"yolo_seg"===H.selectedModel?H.boxPRCurveImg:H.boxPRCurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:"yolo_seg"===H.selectedModel?H.boxRCurveImg:H.boxRCurveImg2,fit:"contain"},null,8,["src"])])]),_:1})]),_:1})):d("",!0),"yolo_test"===H.selectedModel?(n(),u(P,{key:1,xs:24,sm:24,md:24,lg:24,xl:24},{default:r(()=>[l(z,{class:"chart-card",shadow:"hover"},{header:r(()=>[s("div",M,[s("h3",null,g("yolo_seg"===H.selectedModel?"验证集":"测试集")+"曲线概览",1)])]),default:r(()=>[s("div",R,[l(E,{src:H.boxF1CurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:H.boxPCurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:H.boxPRCurveImg2,fit:"contain"},null,8,["src"]),l(E,{src:H.boxRCurveImg2,fit:"contain"},null,8,["src"])])]),_:1})]),_:1})):d("",!0),"resnet50"!==H.selectedModel?(n(),u(P,{key:2,xs:24,sm:24,md:24,lg:24,xl:24},{default:r(()=>[l(z,{class:"chart-card",shadow:"hover"},{header:r(()=>[s("div",_,[t[5]||(t[5]=s("h3",null,"模型效果图",-1)),l(G,{content:"展示YOLOv8的train_batch0或Faster R-CNN的效果图",placement:"top"},{default:r(()=>[l(F,null,{default:r(()=>[l(Z)]),_:1})]),_:1})])]),default:r(()=>["efficientnet"===H.selectedModel?(n(),a("div",A,[l(E,{src:H.efficientnetResultImg,fit:"contain"},null,8,["src"])])):(n(),a("div",D,[s("div",k,[l(E,{src:"yolo_seg"===H.selectedModel?H.segResultsImg:H.valLeftImg,fit:"contain"},null,8,["src"])]),s("div",W,[l(E,{src:"yolo_seg"===H.selectedModel?H.trainBatchImg:H.valRightImg,fit:"contain"},null,8,["src"])])]))]),_:1})]),_:1})):d("",!0),l(z,{class:"data-table-card",shadow:"hover"},{header:r(()=>[s("div",U,[t[6]||(t[6]=s("h3",null,"不同模型效果对比",-1)),l(G,{content:"根据Markdown内容转为结构化表格进行美观展示",placement:"top"},{default:r(()=>[l(F,null,{default:r(()=>[l(Z)]),_:1})]),_:1})])]),default:r(()=>[H.modelCompareRows.length?(n(),u(T,{key:0,data:H.modelCompareRows,style:{width:"100%"}},{default:r(()=>[(n(!0),a(c,null,m(H.modelCompareCols,(e,t)=>(n(),u(Q,{key:t,prop:e,label:e},null,8,["prop","label"]))),128))]),_:1},8,["data"])):(n(),a("div",S,"未能解析到模型对比内容"))]),_:1}),d("",!0)]),_:1})])}],["__scopeId","data-v-628caf6b"]]);export{H as default};
