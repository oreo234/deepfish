import{i as e}from"./index-CfoHtWIz.js";import{_ as a,a as s,f as t,w as l,r,E as o,o as n,b as i,j as d,l as c}from"./index-rHRo5HIh.js";const h={class:"training-page"},m={class:"card-header"},p={ref:"chartEl",class:"chart"},u={ref:"chartEl2",class:"chart"},g={class:"logs"},f={class:"actions"},y={class:"train-image"};const v=a({name:"TrainingPage",data:()=>({selectedModel:"yolov5",loading:!1,logs:"Epoch 1/50 loss=1.24 mAP@0.5=0.45\nEpoch 2/50 loss=1.10 mAP@0.5=0.50\n...",mockCurves:{epochs:Array.from({length:20},(e,a)=>a+1),loss:Array.from({length:20},()=>(.5*Math.random()+.5).toFixed(3)),accuracy:Array.from({length:20},()=>(.2*Math.random()+.7).toFixed(3)),lr:Array.from({length:20},()=>(.001*Math.random()+5e-4).toFixed(6))},trainProcessImg:new URL("/assets/%E8%AE%AD%E7%BB%83%E8%BF%87%E7%A8%8B%E5%9B%BE-CDMi7R3J.png",import.meta.url).href}),mounted(){this.renderCharts()},methods:{renderCharts(){const a=this.$refs.chartEl,s=e(a),t={tooltip:{trigger:"axis"},legend:{data:["损失","准确率"]},xAxis:{type:"category",data:this.mockCurves.epochs.map(e=>`Epoch ${e}`)},yAxis:[{type:"value",name:"损失"},{type:"value",name:"准确率",min:0,max:1}],series:[{name:"损失",type:"line",yAxisIndex:0,data:this.mockCurves.loss},{name:"准确率",type:"line",yAxisIndex:1,data:this.mockCurves.accuracy}]};s.setOption(t),window.addEventListener("resize",()=>s.resize());const l=this.$refs.chartEl2,r=e(l),o={tooltip:{trigger:"axis"},legend:{data:["学习率"]},xAxis:{type:"category",data:this.mockCurves.epochs.map(e=>`Epoch ${e}`)},yAxis:[{type:"value",name:"LR"}],series:[{name:"学习率",type:"line",data:this.mockCurves.lr}]};r.setOption(o),window.addEventListener("resize",()=>r.resize())},async refresh(){this.loading=!0;try{await new Promise(e=>setTimeout(e,600)),o.success("训练状态已刷新")}finally{this.loading=!1}},downloadLogs(){const e=new Blob([this.logs],{type:"text/plain;charset=utf-8"}),a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download="training_logs.txt",s.click(),URL.revokeObjectURL(a)}}},[["render",function(e,a,o,v,x,E){const w=r("el-option"),_=r("el-select"),A=r("el-card"),C=r("el-col"),k=r("el-button"),L=r("el-row"),O=r("el-image");return n(),s("div",h,[t(L,{gutter:20},{default:l(()=>[t(C,{span:16},{default:l(()=>[t(A,{class:"chart-card",shadow:"never"},{header:l(()=>[i("div",m,[a[1]||(a[1]=i("span",null,"训练曲线",-1)),t(_,{modelValue:x.selectedModel,"onUpdate:modelValue":a[0]||(a[0]=e=>x.selectedModel=e),placeholder:"选择模型",size:"small",style:{width:"160px"}},{default:l(()=>[t(w,{label:"YOLOv5",value:"yolov5"}),t(w,{label:"YOLOv8",value:"yolov8"})]),_:1},8,["modelValue"])])]),default:l(()=>[i("div",p,null,512)]),_:1}),t(A,{class:"chart-card",shadow:"never",style:{"margin-top":"20px"}},{header:l(()=>[...a[2]||(a[2]=[i("span",null,"学习率与其它指标",-1)])]),default:l(()=>[i("div",u,null,512)]),_:1})]),_:1}),t(C,{span:8},{default:l(()=>[t(A,{shadow:"never"},{header:l(()=>[...a[3]||(a[3]=[i("span",null,"训练日志",-1)])]),default:l(()=>[i("div",g,[i("pre",null,d(x.logs),1)]),i("div",f,[t(k,{type:"primary",loading:x.loading,onClick:E.refresh},{default:l(()=>[...a[4]||(a[4]=[c("刷新",-1)])]),_:1},8,["loading","onClick"]),t(k,{onClick:E.downloadLogs},{default:l(()=>[...a[5]||(a[5]=[c("下载日志",-1)])]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1}),t(L,{style:{"margin-top":"20px"}},{default:l(()=>[t(C,{span:24},{default:l(()=>[t(A,{shadow:"never"},{header:l(()=>[...a[6]||(a[6]=[i("span",null,"训练过程示意图",-1)])]),default:l(()=>[i("div",y,[t(O,{src:x.trainProcessImg,fit:"contain"},null,8,["src"])])]),_:1})]),_:1})]),_:1})])}],["__scopeId","data-v-e0ac1836"]]);export{v as default};
